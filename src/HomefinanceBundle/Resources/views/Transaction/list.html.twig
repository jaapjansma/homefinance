{% extends 'HomefinanceBundle:layout:administration.html.twig' %}

{% trans_default_domain "administration" %}

{% block title %}
    {{ title }}
{% endblock %}

{% block form_title %}
    {{ title }}
{% endblock %}

{% block form %}

    {%  if (years is defined) %}
    <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{ year }} <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            {% for y in years %}
                <li><a href="{{ url(page, { 'year': y}) }}">{{ y }}</a></li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <table class="table table-striped table-hover table-condensed">
        <thead>
        <tr>
            <th>{{ 'transaction.date'|trans  }}</th>
            <th>{{ 'transaction.category'|trans }}</th>
            <th>{{ 'transaction.bank_account'|trans }}</th>
            <th>{{ 'transaction.name'|trans }}</th>
            <th class="text-right">{{ 'transaction.amount'|trans }}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for transaction in transactions %}
            <tr>
                <td>{{ transaction.date|date('d-m-Y') }}</td>
                <td>{% if transaction.category %}{{ transaction.category.indentedTitle }}{% endif %}</td>
                <td>{{ transaction.bankAccount.name }}</td>
                <td>{{ transaction.name }}</td>
                <td class="text-right">&euro; {{ transaction.amount|number_format(2, ',', '.') }}</td>
                <td class="text-right">
                    {% if (has_access_to_administration(app.user, administration, 'Edit')) %}
                        <a href="{{ url('transaction_edit', {'id': transaction.id}) }}" class="btn btn-xs btn-success">
                            <i class="glyphicon glyphicon-pencil"></i>&nbsp; {{ 'transaction.edit'|trans }}
                        </a>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}